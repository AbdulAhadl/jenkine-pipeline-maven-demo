pipeline{
    agent any
    environment{
        PATH="/etc/opt/apache-maven-3.9.0/bin:$PATH"
    }
    stages{
          stage("code checkout"){
              steps{
                  git credentialsId: 'vickyfit2022', url: 'https://github.com/AbdulAhadl/jenkine-pipeline-maven-demo.git'
              }
          }
         stage("Mave build"){
             steps{
                  sh 'mvn clean package'
                  sh "mv target/*.war target/myweb.war"
             }
         
         }
         stage("code_Deploy"){
             steps{
                   sshagent(['tomcat-server']) {
                      sh """
                           scp -o StrictHostKeyChecking=no target/myweb.war  ec2-user@172.31.42.226:/etc/opt/tomcat/webapps/target/myweb.war
                      """
            }
           }  
         }
         
    
    
    }



}
